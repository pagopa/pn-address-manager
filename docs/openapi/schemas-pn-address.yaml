components:
  schemas:

    NormalizeRequest:
      type: object
      required:
        - correlationId
        - requestItems
      properties:
        correlationId:
          type: string
        requestItems:
          type: array
          minItems: 1
          maxItems: 100
          items:
            type: object
            required:
              - address
              - id
            properties:
              id:
                type: string
              address:
                $ref: '#/components/schemas/AnalogAddress'

    NormalizeResult:
      type: object
      required:
        - correlationId
      properties:
        correlationId:
          type: string
        resultItems:
          type: array
          minItems: 1
          maxItems: 100
          items:
            type: object
            required:
              - id
            properties:
              id:
                type: string
              normalizedAddress:
                $ref: '#/components/schemas/AnalogAddress'
              error:
                type: string
                description: Se presente indica che si è verificato un errore durante l'esecuzione dell'operazione richiesta.


    DeduplicateItemsRequest:
      type: object
      required:
        - correlationId
        - requestItems
      properties:
        correlationId:
          type: string
        requestItems:
          type: array
          minItems: 1
          maxItems: 100
          items:
            $ref: "#/components/schemas/DeduplicatesRequest"

    DeduplicateItemsResult:
      type: object
      required:
        - correlationId
      properties:
        correlationId:
          type: string
        resultItems:
          type: array
          minItems: 1
          maxItems: 100
          items:
            $ref: "#/components/schemas/DeduplicatesResponse"
        
    DeduplicatesRequest:
      type: object
      required:
        - baseAddress
        - targetAddress
        - id 
      properties:
        id:
          type: string
        baseAddress:
          $ref: '#/components/schemas/AnalogAddress'
        targetAddress:
          $ref: '#/components/schemas/AnalogAddress'
      
    DeduplicatesResponse:
      type: object
      required:
        - id
        - equalityResult
      properties:
        id:
          type: string
        equalityResult:
          type: boolean
        error:
          type: string
        normalizedAddress:
          $ref: '#/components/schemas/AnalogAddress'
    
    AcceptedResponse:
      type: object
      properties:
        correlationId:
          type: string

    AnalogAddress:
      description: Indirizzo analogico
      required:
      - addressRow
      - city
      - nameRow
      properties:
        nameRow:
          type: string
          description: Cognome e nome o ragione sociale del destinatario
        nameRow2:
          type: string
          description: Seconda riga sulla busta.
        addressRow:
          type: string
          description: Indirizzo del destinatario.
        addressRow2:
          type: string
          description: Specifica dell’indirizzo di residenza del destinatario (seconda
            riga indirizzo sulla busta).
        cap:
          type: string
          description: Cap del destinatario; in caso di invio estero diventa facoltativo.
        city:
          type: string
          description: Comune del destinatario.
        city2:
          type: string
          description: Frazione del destinatario. Potrebbe essere utile se il chiamante
            non fornisce il cap.
        pr:
          type: string
          description: Provincia del destinatario; in caso di invio estero diventa
            facoltativo.
        country:
          type: string
          description: "In caso di destinatario estero, diventa obbligatoria l’indicazione\
            \ della nazione di destinazione,  in standard UPU o altro standard condiviso."
      